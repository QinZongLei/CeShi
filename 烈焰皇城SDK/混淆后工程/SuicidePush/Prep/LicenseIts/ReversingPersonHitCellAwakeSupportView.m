
#import "NSString+Scruffy.h"








#import "ReversingPersonHitCellAwakeSupportView.h"
#import "RepeatOrangeLooperObservingInterior.h"
#import "PrefixWirelessCollectionViewCell.h"
#import "LateShowAcuteManager.h"
#import "ReverseFolderEmbeddingTertiaryFilm.h"

#define kLineSpacing  kWidth(10.f)   //列间距
#define kRowNumber    4     //列数

@interface ReversingPersonHitCellAwakeSupportView ()<UICollectionViewDelegate, UICollectionViewDataSource, UICollectionViewDelegateFlowLayout>
@property(nonatomic, strong) UIView *view;
@property(nonatomic,strong)UIImageView *butArmour;
@property(nonatomic,strong)UIImageView *pieceInfer;
@property(nonatomic,strong) UILabel *subAtomName;
@property(nonatomic,strong) UILabel *mandatory;
@property(nonatomic,strong) UIImageView *moodSee;
@property (nonatomic, strong) UIButton *hallCert;
@property (nonatomic, strong) UICollectionViewFlowLayout *saltExpand;
@property (nonatomic, strong) UICollectionView *armHexBlock;
@property (nonatomic, strong) NSMutableArray *airSaltLawList;
@property (nonatomic, strong) UIButton *unfocusedCode;
@property (nonatomic, strong) UIButton *ropeRetWonAccount;
@end

@implementation ReversingPersonHitCellAwakeSupportView

- (instancetype)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self  uniformProtocolsUnableLocalFilmProgress];
        [self readableNormalizeDecreaseUserIntegrityView];
    }
    return self;
}

-(void)uniformProtocolsUnableLocalFilmProgress{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(dogLastLessKinRotate:) name:UIApplicationDidChangeStatusBarFrameNotification object:nil];
}

-(void)readableNormalizeDecreaseUserIntegrityView{
 
    
    NSString * fixQuitBus = [[RepeatOrangeLooperObservingInterior manager].userInfo objectForKey:@"dXNlcl9uYW1l".relishKhaki];
    NSString * userIdStr =[[RepeatOrangeLooperObservingInterior manager].userInfo objectForKey:@"dWlk".relishKhaki];
    
    [self addSubview:({
        self.view = [[UIView alloc] init];
        self.view.layer.masksToBounds = YES;
        self.view.frame = CGRectMake(0, 0, SCREENWIDTH, SCREENHEIGHT);

        self.view.backgroundColor = [UIColor clearColor];
        self.view;
    })];
    
    [self.view addSubview:({
        self.butArmour = [[UIImageView alloc] init];
        self.butArmour.userInteractionEnabled = YES;
        self.butArmour.frame = CGRectMake(0,0, kWidth(450), kWidth(320));
        self.butArmour.center = self.view.center;
        self.butArmour.image = kSetBundleImage(dialogCenterBg);
        self.butArmour;
    })];
    
    [self.butArmour addSubview:({
        self.pieceInfer = [[UIImageView alloc] init];
        self.pieceInfer.frame = CGRectMake(kWidth(65), kWidth(70), kWidth(50), kWidth(50));
        self.pieceInfer.image = kSetBundleImage(userIcon);

        self.pieceInfer;
    })];
    
    NSString *accountTip = [NSString stringWithFormat:@"6LSm5Y+3OiAlQA==".relishKhaki, fixQuitBus];
    NSMutableAttributedString *accountColorArray = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:@"6LSm5Y+3OiAlQA==".relishKhaki, fixQuitBus]];
    NSString *tip = [NSString stringWithFormat:@"JUA=".relishKhaki,[accountTip substringToIndex:3]];
    NSRange tipColor = [[accountColorArray string] rangeOfString:tip];
    [accountColorArray addAttribute:NSForegroundColorAttributeName value:color_agreement_tip range:tipColor];
    NSString *account = [NSString stringWithFormat:@"JUA=".relishKhaki,[accountTip substringFromIndex:3]];
    NSRange accountColor = [[accountColorArray string] rangeOfString:account];
    [accountColorArray addAttribute:NSForegroundColorAttributeName value:color_agreement_tip  range:accountColor];
    
    [self.butArmour addSubview:({
        self.subAtomName = [[UILabel alloc] init];
        self.subAtomName.frame = CGRectMake(self.pieceInfer.right+kWidth(5), self.pieceInfer.top+kWidth(5), kWidth(200), kWidth(20));
        [self.subAtomName setFont:[UIFont fontWithName:@"SGVsdmV0aWNhLUJvbGQ=".relishKhaki size:kWidth(14)]];
        self.subAtomName.attributedText = accountColorArray;

        self.subAtomName;
    })];
    
    [self.butArmour addSubview:({
        self.hallCert = [UIButton buttonWithType:UIButtonTypeCustom];
        self.hallCert.tag = 20211201;
        self.hallCert.frame = CGRectMake(self.butArmour.width - kWidth(40), kWidth(35), kWidth(35), kWidth(35));
        [self.hallCert setBackgroundImage:kSetBundleImage(backBtn) forState:UIControlStateNormal];
        [self.hallCert addTarget:self action:@selector(fourthSunAction:) forControlEvents:UIControlEventTouchUpInside];
        self.hallCert;
    })];
    
    
    NSString *uidTip = [NSString stringWithFormat:@"55So5oi3SUQ6ICVA".relishKhaki, userIdStr];
    NSMutableAttributedString *uidColorArray = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:@"55So5oi3SUQ6ICVA".relishKhaki, userIdStr]];
    NSString *utip = [NSString stringWithFormat:@"JUA=".relishKhaki,[uidTip substringToIndex:5]];
    NSRange uidTipColor = [[uidColorArray string] rangeOfString:utip];
    [uidColorArray addAttribute:NSForegroundColorAttributeName value:color_agreement_tip range:uidTipColor];
    NSString *uid = [NSString stringWithFormat:@"JUA=".relishKhaki,[uidTip substringFromIndex:5]];
    NSRange uidColor = [[uidColorArray string] rangeOfString:uid];
    [uidColorArray addAttribute:NSForegroundColorAttributeName value:color_agreement_tip  range:uidColor];
    [self.butArmour addSubview:({
        self.mandatory = [[UILabel alloc] init];
        self.mandatory.frame = CGRectMake(self.subAtomName.left, self.subAtomName.bottom+kWidth(5), self.subAtomName.width, self.subAtomName.height);
        [self.mandatory setFont:[UIFont fontWithName:@"SGVsdmV0aWNhLUJvbGQ=".relishKhaki size:kWidth(14)]];
        self.mandatory.attributedText = uidColorArray;
        self.mandatory;
    })];
    
 
    
    [self.butArmour addSubview:({
        self.moodSee = [[UIImageView alloc] init];
        self.moodSee.frame = CGRectMake((self.butArmour.width - (self.butArmour.width-kWidth(80)))/2, self.mandatory.bottom+kWidth(5), self.butArmour.width-kWidth(80), kWidth(1));
        self.moodSee.image = kSetBundleImage(lineImg);

        self.moodSee;
    })];
    
    //获取菜单列表
    self.airSaltLawList =  [RepeatOrangeLooperObservingInterior designEggFatCenter];
    
    [self.butArmour addSubview:({
        self.saltExpand = [[UICollectionViewFlowLayout alloc] init];
        self.saltExpand.minimumLineSpacing = kLineSpacing;
       
        self.saltExpand.minimumInteritemSpacing = kWidth(4);
        self.saltExpand.itemSize = CGSizeMake((self.butArmour.width-kWidth(140))/kRowNumber, (self.butArmour.width-kWidth(140))/kRowNumber);
        
        self.saltExpand.scrollDirection = UICollectionViewScrollDirectionVertical;
        self.armHexBlock = [[UICollectionView alloc] initWithFrame:CGRectMake(kWidth(60), self.moodSee.bottom + kWidth(5), self.butArmour.width - kWidth(110), kWidth(90)) collectionViewLayout:self.saltExpand];
        self.armHexBlock.delegate = self;
        self.armHexBlock.dataSource = self;
        [self.armHexBlock registerClass:[PrefixWirelessCollectionViewCell class]forCellWithReuseIdentifier:CelliIdentify];
        self.armHexBlock.showsVerticalScrollIndicator = NO;
        self.armHexBlock.showsHorizontalScrollIndicator = NO;
        self.armHexBlock.backgroundColor = [UIColor clearColor];
        self.armHexBlock;
    })];
    
    [self.butArmour addSubview:({
        self.unfocusedCode = [UIButton buttonWithType:UIButtonTypeCustom];
        self.unfocusedCode.frame = CGRectMake(self.butArmour.width/2 - kWidth(130), self.armHexBlock.bottom+kWidth(1), kWidth(260), kWidth(20));
        self.unfocusedCode.tag = 20211202;
        self.unfocusedCode.backgroundColor = [UIColor clearColor];
        self.unfocusedCode.titleLabel.font = [UIFont systemFontOfSize:kWidth(14)];

        [self.unfocusedCode setAttributedTitle:[RecoveredWarpPreservesSlavicIntegral koreanEnergyPoolExtensionSafetyStriation:@"5YWz5rOo5YWs5LyX5Y+377ya5pu05aSa56aP5Yip5rS75Yqo562J5oKo5p2l5Y+C5LiO".relishKhaki exhaustedColor:color_idCrad_tip] forState: 0];
        [self.unfocusedCode setTitleColor:color_idCrad_tip forState:UIControlStateNormal];
        [self.unfocusedCode addTarget:self action:@selector(columnSmallerAction:) forControlEvents:UIControlEventTouchUpInside];
        self.unfocusedCode;
    })];
    
    [self.butArmour addSubview:({
        self.ropeRetWonAccount = [UIButton buttonWithType:UIButtonTypeCustom];
        self.ropeRetWonAccount.frame = CGRectMake((self.butArmour.width-kWidth(150))/2, self.unfocusedCode.bottom+kWidth(10), kWidth(180), kWidth(40));
        self.ropeRetWonAccount.tag = 20211203;
        [self.ropeRetWonAccount setBackgroundImage:kSetBundleImage(switchImg) forState:UIControlStateNormal];
        [self.ropeRetWonAccount addTarget:self action:@selector(wrapClosureThirdItsTeethAction:) forControlEvents:UIControlEventTouchUpInside];
        self.ropeRetWonAccount.imageView.contentMode = UIViewContentModeScaleAspectFit;
        self.ropeRetWonAccount;
    })];
}

- (void)fourthSunAction:(UIButton *)sender {
    //关闭当前界面
    dispatch_async(dispatch_get_main_queue(), ^{
        [HitTypeLogHashManager foggyWasBedMenView];
        [HitTypeLogHashManager neutralCaloriesWirelessInterruptSerialView];
        [self removeFromSuperview];
    });
}

- (void)columnSmallerAction:(UIButton *)sender {
    //显示公众号界面
    dispatch_async(dispatch_get_main_queue(), ^{
        [HitTypeLogHashManager enablingUnboundedRedCapFreestyleView];
        [self removeFromSuperview];
    });
}

- (void)wrapClosureThirdItsTeethAction:(UIButton *)sender {
        //切换账号
        dispatch_async(dispatch_get_main_queue(), ^{
            [LateShowAcuteManager cutWonClang:^(BOOL status) {
                if (self) {
                    [self removeFromSuperview];
                    STARTLOGIN([ReverseFolderEmbeddingTertiaryFilm sharedInstance].fatalWhoHit,[ReverseFolderEmbeddingTertiaryFilm sharedInstance].leftLocation);
                }
            }];
        });
}

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {
    return 1;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
    return self.airSaltLawList.count;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
   PrefixWirelessCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:CelliIdentify forIndexPath: indexPath];
    cell.addLike = self.airSaltLawList[indexPath.row];
    return cell;
    
}
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    NSDictionary *tempDic = self.airSaltLawList[indexPath.row];
    NSString *tempName = [tempDic valueForKey:@"bmFtZQ==".relishKhaki];
    if ([tempName isEqualToString: @"5YWs5ZGK".relishKhaki]) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [HitTypeLogHashManager usageEvaluatedGatheringCivilMagneticView];
            [self removeFromSuperview];
        });
    }else if ([tempName isEqualToString:@"6LSm5Y+3".relishKhaki]){
        dispatch_async(dispatch_get_main_queue(), ^{
            [HitTypeLogHashManager projectPushBitPresetInterruptWonView];
            [self removeFromSuperview];
        });
    }else if ([tempName isEqualToString:@"5YWs5LyX5Y+3".relishKhaki]){
        dispatch_async(dispatch_get_main_queue(), ^{
            [HitTypeLogHashManager enablingUnboundedRedCapFreestyleView];
            [self removeFromSuperview];
        });
    }else if ([tempName isEqualToString:@"6IGU57O75a6i5pyN".relishKhaki]){
        //找客服
        NSString * urlStr = [[RepeatOrangeLooperObservingInterior manager].fiveSoftInfo objectForKey:@"c2VydmljZV91cmw=".relishKhaki];
        if (!kStringIsNull(urlStr)) {
            [HitTypeLogHashManager writtenEngineView:urlStr];
        }
    }
}



-(UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout insetForSectionAtIndex:(NSInteger)section {
    
    return UIEdgeInsetsMake(kWidth(5), kWidth(0),kWidth(5), kWidth(0));//分别为上、左、下、右
}




- (void)dogLastLessKinRotate:(NSNotification *)notice {
    [self setNeedsLayout];
    [self readableNormalizeDecreaseUserIntegrityView];
}
@end
