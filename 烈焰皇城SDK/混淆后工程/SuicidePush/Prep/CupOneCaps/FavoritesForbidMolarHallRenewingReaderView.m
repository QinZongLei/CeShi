
#import "NSString+Scruffy.h"








#import "FavoritesForbidMolarHallRenewingReaderView.h"
#import "RepeatOrangeLooperObservingInterior.h"
#import "LateShowAcuteManager.h"

@interface FavoritesForbidMolarHallRenewingReaderView ()
@property(nonatomic,  copy) NSString *fixQuitBus;
@property(nonatomic,  copy) NSString *moveClimbed;
@property (nonatomic, strong) UIButton *hallCert;
@property (nonatomic, strong) UIImageView *mayMaleImage;
@property (nonatomic, strong) UILabel *tallSource;
@property (nonatomic, strong) UILabel *eleven;
@property (nonatomic, strong) UILabel *sumEncryptHow;
@property (nonatomic, strong) UILabel *icyHeavySixShe;
@property (nonatomic, strong) UILabel *wayQueueTime;
@property (nonatomic, strong) dispatch_source_t timer;
@end

@implementation FavoritesForbidMolarHallRenewingReaderView

- (instancetype)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self  uniformProtocolsUnableLocalFilmProgress];
        [self pitchTransportStandVisitBeginningView];
        
        UIImage *ivSave = [self offBedSixDone:self.view];
        UIImageWriteToSavedPhotosAlbum(ivSave, self, @selector(meterProtocolsFollowerAbsentBadComposer:nothingTenNordicOverlayBeaconsCrop:contextInfo:), nil);
    }
    return self;
}

-(void)uniformProtocolsUnableLocalFilmProgress{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(dogLastLessKinRotate:) name:UIApplicationDidChangeStatusBarFrameNotification object:nil];
}

-(void)pitchTransportStandVisitBeginningView{
    self.enhanced = @"5rOo5YaM5oiQ5Yqf".relishKhaki;
    self.fixSurge.frame = CGRectMake((self.butArmour.width-kWidth(120))/2, kWidth(70), kWidth(120), kWidth(30));
    NSDictionary *userAccount = [[RepeatOrangeLooperObservingInterior versionsRowAccount] lastObject];
    if (kDictNotNull(userAccount)) {
        self.fixQuitBus = [NSString stringWithFormat:@"JUA=".relishKhaki,[userAccount valueForKey:@"YWNjb3VudA==".relishKhaki]];
        self.moveClimbed  = [NSString stringWithFormat:@"JUA=".relishKhaki,[userAccount valueForKey:@"cGFzc3dvcmQ=".relishKhaki]];
    }
    
    [self.butArmour addSubview:({
        self.hallCert = [UIButton buttonWithType:UIButtonTypeCustom];
        self.hallCert.frame = CGRectMake(self.butArmour.width - kWidth(40), kWidth(35), kWidth(35), kWidth(35));
        self.hallCert.tag = 20211201;
        [self.hallCert setImage:kSetBundleImage(backBtn) forState:UIControlStateNormal];
        [self.hallCert addTarget:self action:@selector(boxCutScanAction:) forControlEvents:UIControlEventTouchUpInside];
        self.hallCert;
    })];
    
    [self.butArmour addSubview:({
        self.mayMaleImage = [[UIImageView alloc] init];
        self.mayMaleImage.frame = CGRectMake((self.butArmour.width-kWidth(53))/2, self.fixSurge.bottom+ kWidth(10), kWidth(53), kWidth(53));
        self.mayMaleImage.image = kSetBundleImage(userIcon);
        self.mayMaleImage;
    })];
    
    NSString *accountTip = [NSString stringWithFormat:@"6LSm5Y+3OiAlQA==".relishKhaki, self.fixQuitBus];
    NSMutableAttributedString *accountColorArray = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:@"6LSm5Y+3OiAlQA==".relishKhaki, self.fixQuitBus]];
    NSString *tip = [NSString stringWithFormat:@"JUA=".relishKhaki,[accountTip substringToIndex:3]];
    NSRange tipColor = [[accountColorArray string] rangeOfString:tip];
    [accountColorArray addAttribute:NSForegroundColorAttributeName value:color_agreement_tip range:tipColor];
    NSString *account = [NSString stringWithFormat:@"JUA=".relishKhaki,[accountTip substringFromIndex:3]];
    NSRange accountColor = [[accountColorArray string] rangeOfString:account];
    [accountColorArray addAttribute:NSForegroundColorAttributeName value:color_agreement_tip  range:accountColor];
    
    [self.butArmour addSubview:({
        self.tallSource = [[UILabel alloc] init];
        self.tallSource.textAlignment = NSTextAlignmentCenter;
        self.tallSource.frame = CGRectMake((self.butArmour.width-kWidth(300))/2, self.mayMaleImage.bottom + kWidth(10), kWidth(300), kWidth(20));
        [self.tallSource setFont:[UIFont fontWithName:@"SGVsdmV0aWNhLUJvbGQ=".relishKhaki size:17]];
       self.tallSource.attributedText = accountColorArray;
        self.tallSource;
    })];
    
    NSString *pwdTip = [NSString stringWithFormat:@"5a+G56CBOiAlQA==".relishKhaki, self.moveClimbed];
    NSMutableAttributedString *pwdColorArray = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:@"5a+G56CBOiAlQA==".relishKhaki, self.moveClimbed]];
    NSString *tipPwd = [NSString stringWithFormat:@"JUA=".relishKhaki,[pwdTip substringToIndex:3]];
    NSRange tipPwdColor = [[pwdColorArray string] rangeOfString:tipPwd];
    [pwdColorArray addAttribute:NSForegroundColorAttributeName value:color_agreement_tip range:tipPwdColor];
    NSString *pwd = [NSString stringWithFormat:@"JUA=".relishKhaki,[pwdTip substringFromIndex:3]];
    NSRange pwdColor = [[pwdColorArray string] rangeOfString:pwd];
    [pwdColorArray addAttribute:NSForegroundColorAttributeName value:color_agreement_tip  range:pwdColor];
    
    [self.butArmour addSubview:({
        self.eleven = [[UILabel alloc] init];
        self.eleven.frame = CGRectMake(self.tallSource.left, self.tallSource.bottom+kWidth(5), self.tallSource.width,self.tallSource.height);
        self.eleven.textAlignment = NSTextAlignmentCenter;
        [self.eleven setFont:[UIFont fontWithName:@"SGVsdmV0aWNhLUJvbGQ=".relishKhaki size:17]];
       self.eleven.attributedText = pwdColorArray;
        self.eleven;
    })];
    
    [self.butArmour addSubview:({
        self.sumEncryptHow = [[UILabel alloc] init];
        self.sumEncryptHow.frame = CGRectMake((self.butArmour.width-kWidth(240))/2, self.eleven.bottom+kWidth(10), kWidth(240), kWidth(20));
        self.sumEncryptHow.textAlignment = NSTextAlignmentCenter;
    
        self.sumEncryptHow.text = @"Kui0puWPt+WvhueggeW3sue7j+aIquWbvuS/neWtmOaJi+acuuebuOWGjA==".relishKhaki;
        self.sumEncryptHow.font = [UIFont systemFontOfSize:kWidth(13)];
        self.sumEncryptHow.textColor = color_agreement_tip;
        self.sumEncryptHow;
    })];
    
    [self.butArmour addSubview:({
        self.icyHeavySixShe = [[UILabel alloc] init];
        self.icyHeavySixShe.frame = CGRectMake((self.butArmour.width-kWidth(300))/2, self.sumEncryptHow.bottom, kWidth(300), kWidth(20));
        self.icyHeavySixShe.textAlignment = NSTextAlignmentCenter;
        self.icyHeavySixShe.text = @"6K+35aal5ZaE5L+d5a2Y5aW96Ieq5bex55qE6LSm5Y+35a+G56CBLOWLv+S4juS7luS6uuWIhuS6qyo=".relishKhaki;
  
        self.icyHeavySixShe.textColor = color_agreement_tip;
        self.icyHeavySixShe.font = [UIFont systemFontOfSize:kWidth(13)];
        self.icyHeavySixShe;
    })];
    
    [self.butArmour addSubview:({
        self.wayQueueTime = [[UILabel alloc] init];
        self.wayQueueTime.textColor = RGBHEX(0x67A7B2);
        self.wayQueueTime.font = [UIFont systemFontOfSize:kWidth(13)];
        self.wayQueueTime.frame = CGRectMake((self.butArmour.width-kWidth(120))/2, self.icyHeavySixShe.bottom+kWidth(5), kWidth(120), kWidth(20));
        self.wayQueueTime;
    })];
    [self netscapeTime];
    
}

- (UIImage *)offBedSixDone:(UIView *)view {
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, YES, 0);
    [view drawViewHierarchyInRect:view.bounds afterScreenUpdates:YES];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image;
}

- (void)boxCutScanAction:(UIButton *)sender {
    
    if (self.timer) {
        
        dispatch_source_cancel(self.timer);
    }
    [LateShowAcuteManager executeRomanLogin:self.fixQuitBus moveClimbed:self.moveClimbed stopBlock:^(BOOL status){
        if (status) {
            //登陆成功直接关闭当前界面
            [self removeFromSuperview];
        }
    }];
    [self removeFromSuperview];
}

-(void)netscapeTime{
    dispatch_async(dispatch_get_main_queue(), ^{
        __block NSInteger timeLine = 5;
        __block NSInteger timeOut = timeLine;
        dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
        dispatch_source_t _timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);
        //每秒执行一次
        dispatch_source_set_timer(_timer, dispatch_walltime(NULL, 0), 1.0 * NSEC_PER_SEC, 0);
        dispatch_source_set_event_handler(_timer, ^{
            //倒计时结束，关闭
            if (timeOut <= 0) {
                dispatch_source_cancel(_timer);
                dispatch_async(dispatch_get_main_queue(), ^{
                    [self removeFromSuperview];
                    [LateShowAcuteManager executeRomanLogin:self.fixQuitBus moveClimbed:self.moveClimbed stopBlock:^(BOOL status){
                        if (status) {
                            //登陆成功直接关闭当前界面
                            [self removeFromSuperview];
                            }
                        }];
                    });
            } else {
                int allTime = (int)timeLine + 1;
                int seconds = timeOut % allTime;
                NSString *timeStr = [NSString stringWithFormat:@"JTAuMmRz".relishKhaki, seconds];
                dispatch_async(dispatch_get_main_queue(), ^{
                     self.wayQueueTime.text = [NSString stringWithFormat:@"JUDnp5LlkI7oh6rliqjlhbPpl60=".relishKhaki,timeStr];
                });
                timeOut--;
            }
        });
        dispatch_resume(_timer);
        self.timer = _timer;
    });
}


- (void)meterProtocolsFollowerAbsentBadComposer:(UIImage *)image nothingTenNordicOverlayBeaconsCrop:(NSError *)error contextInfo:(void *)contextInfo {
    NSString *message = @"5L+d5a2Y5aSx6LSl".relishKhaki;
    if (!error) {
        message = @"5oiQ5Yqf5L+d5a2Y5Yiw55u45YaM".relishKhaki;
    }
    [DryTapSafeToast warnToast:message location:@"Y2VudGVy".relishKhaki formTime:1.5f];
}


- (void)dogLastLessKinRotate:(NSNotification *)notice {
    [self setNeedsLayout];
    [self pitchTransportStandVisitBeginningView];
}

@end
